#version 450

layout (binding=0, r32ui) uniform uimage3D image;

void main() {
  ivec3 index = ivec3(gl_GlobalInvocationID.xyz);
  vec3  color = vec3(index) / vec3(128,128,2);

  uint bits = packUnorm4x8(vec4(color,1.0));
  imageAtomicMax(image, index, bits);
  }
